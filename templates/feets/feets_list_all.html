{% extends '../base.html' %}
{% load static %}

{% block style %}
<link rel='stylesheet' href='{% static 'css/feets_list_all.css' %}'>
{% endblock style %}

{% block content %}


<div class='container_box'>


    <div class='feet_title'>
        <h6>의지발 둘러보기<h6>
    </div>

    <form id='filter_form' method='get'>
        <div class='filter_form_container'>
            <div class='return'>
                <a class='btn_reset' href='{% url 'feets:feets-list-all' %}'><i class="fas fa-redo"></i> 전체보기</a>
            </div>
                <div class='filter_form_container_inner'>
                    
            
                    <div class='d-flex flex-row'>
                        <div class='category_title'>
                            <div class='label_btn2'>
                                <h3>제품 기능</h3>
                            </div>
                            <div class='label_btn'>
                                <h3>활동 범위<button class='exclamation_btn' type="button" data-bs-placement="bottom"
                                    data-bs-toggle="popover" data-bs-trigger="focus" title="활동 범위" data-bs-html="true" 
                                    data-bs-content="<i class='fas fa-home'></i> : 실내 <br><i class='fas fa-walking'></i> : 근거리(통근/통학)<br><i class='fas fa-biking'></i> : 제약없는 활동">
                                    <i class="fas fa-exclamation-circle"></i>
                                </button></h3>
                                
                            </div>
                            <div class='label_btn'>
                                <h3>제품 분류</h3>
                            </div>
                        </div>
                        <div>
                            <div class='d-flex flex-row form_category_value'>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='5' id='function_1'>
                                    <label class='form-check-label' for='function_1'><h3>방수</h3></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='6' id='function_2'>
                                    <label class='form-check-label' for='function_2'><h3>사이드플렉스</h3></label>
                                    <button class='exclamation_btn' type="button" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-trigger="focus" title="사이드 플렉스" data-bs-content="좌우 움직임 기능으로 어떠한 지면에서도 자신있게 사용자를 서포트하는 기능입니다.">
                                        <i class="fas fa-exclamation-circle pop_icon"></i>
                                    </button>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='7' id='function_3'>
                                    <label class='form-check-label' for='function_3'><h3>토션</h3></label>
                                    <button class='exclamation_btn' type="button" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-trigger="focus" title="토션" data-bs-content="좌우토션(+/- 10)과 충격흡수가 가능하게 설계 된 제품 ">
                                        <i class="fas fa-exclamation-circle pop_icon"></i>
                                    </button>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='8' id='function_4'>
                                    <label class='form-check-label' for='function_4'><h3>낮은발</h3></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='9' id='function_5'>
                                    <label class='form-check-label' for='function_5'><h3>하모니</h3></label>
                                </div>
                            </div>

                            <div class='d-flex flex-row form_category_value'>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='17' id='function_6'>
                                    <label class='form-check-label' for='function_6'><h3>굽조절</h3></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='18' id='function_7'>
                                    <label class='form-check-label' for='function_7'><h3>소아용</h3></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='function' value='19' id='function_8'>
                                    <label class='form-check-label' for='function_8'><h3>스포츠용</h3></label>
                                </div>
                            </div>


                            <div class='d-flex flex-row form_category_value'>
                                <div class='label_btn'>
                                    <input type='checkbox' name='mobis_grade' value='1' id='mobis_grade_1'>
                                    <label class='form-check-label' for='mobis_grade_1'><i class="fas fa-home mg_icon"></i></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='mobis_grade' value='2' id='mobis_grade_2'>
                                    <label class='form-check-label' for='mobis_grade_2'><i class="fas fa-walking mg_icon"></i></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='mobis_grade' value='3' id='mobis_grade_3'>
                                    <label class='form-check-label' for='mobis_grade_3'><i class="fas fa-biking mg_icon"></i></label>
                                </div>
                            </div>

                            <div class='d-flex flex-row form_category_value'>
                                <div class='label_btn'>
                                    <input type='checkbox' name='rating' value='1' id='rating_1'>
                                    <label class='form-check-label' for='rating_1'><h3>베이직</h3></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='rating' value='2' id='rating_2'>
                                    <label class='form-check-label' for='rating_2'><h3>어드밴스드</h3></label>
                                </div>
                                <div class='label_btn'>
                                    <input type='checkbox' name='rating' value='3' id='rating_3'>
                                    <label class='form-check-label' for='rating_3'><h3>프리미엄</h3></label>
                                </div>
                            </div>
                            
                        </div>
                    </div>
    

                    
                
                </div>
                <div class='pc_text_input'>
                    {{ form.name }}
                    <button class='pc_text_search_btn'><i class="fas fa-search pc_search_btn"></i></button>
                </div>
        </div>
        
        <div class='mob_filter_form_container'>
            <div class='return'>
                <a class='btn_reset' href='{% url 'feets:feets-list-all' %}'><i class="fas fa-redo"></i> 전체보기</a>
            </div>
            <div class='mob_category_title'>

                    <div class='d-flex flex-row justify-content-between'>
                            <h3>제품 기능</h3>
                    </div>


                    <div class="card card-body">
                        <div class='d-flex align-items-center mob_function_label_container'>

                                <label class='mob_label_btn' id='mob_function_1' for='function_1'>방수</label>
                                <label class='mob_label_btn' id='mob_function_2' for='function_2'>사이드플렉스</label>
                                <a tabindex="0" class='exclamation_btn' role="button" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-trigger="focus" title="사이드 플렉스" data-bs-content="좌우 움직임 기능으로 어떠한 지면에서도 자신있게 사용자를 서포트하는 기능입니다.">
                                    <i class="fas fa-exclamation-circle"></i>
                                </a>
                                <label class='mob_label_btn' id='mob_function_3' for='function_3'>토션</label>
                                <a tabindex="0" class='exclamation_btn' role="button" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-trigger="focus" title="토션" data-bs-content="좌우토션(+/- 10)과 충격흡수가 가능하게 설계 된 제품 ">
                                    <i class="fas fa-exclamation-circle"></i>
                                </a>
                                <label class='mob_label_btn' id='mob_function_4' for='function_4'>낮은발</label>
                                <label class='mob_label_btn' id='mob_function_5' for='function_5'>하모니</label>
                            </div>
                            
                            <div class='d-flex align-items-center'>
                                <label class='mob_label_btn' id='mob_function_6' for='function_6'>굽조절</label>
                                <label class='mob_label_btn' id='mob_function_7' for='function_7'>소아용</label>
                                <label class='mob_label_btn' id='mob_function_8' for='function_8'>스포츠용</label>
                            
                        </div>
                    </div>
            
                    <div>
                            <h3>활동 범위<a tabindex="0" class='exclamation_btn' role="button" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-html="true" title="활동 범위" data-bs-content="<i class='fas fa-home'></i> : 실내 <br><i class='fas fa-walking mob_mg_icon'></i> : 근거리(통근/통학)<br><i class='fas fa-biking'></i> : 제약없는 활동">
                                <i class="fas fa-exclamation-circle"></i>
                                </a>
                            </h3>
                    </div>
                    
                    <div class="card card-body">
                        <div class='d-flex align-items-center'> 
                        <label class='mob_label_btn' id='mob_mobis_grade_1' for='mobis_grade_1'><i class="fas fa-home mob_mg_icon"></i></label>
                        <label class='mob_label_btn' id='mob_mobis_grade_2' for='mobis_grade_2'><i class="fas fa-walking mob_mg_icon"></i></label>
                        <label class='mob_label_btn' id='mob_mobis_grade_3' for='mobis_grade_3'><i class="fas fa-biking mob_mg_icon"></i></label>
                        </div>
                    </div>


                    <div class='d-flex flex-row justify-content-between'>
                            <h3>제품 분류</h3>
                    </div>


                    <div class="card card-body">
                        <div class='d-flex align-items-center'> 
                        <label class='mob_label_btn' id='mob_rating_1' for='rating_1'>베이직</label>
                        <label class='mob_label_btn' id='mob_rating_2' for='rating_2'>어드밴스드</label>
                        <label class='mob_label_btn' id='mob_rating_3' for='rating_3'>프리미엄</label>
                        </div>
                    </div>
                    <div class='mob_text_input d-flex'>
                        {{ form.name }}
                        <div class='mob_search_btn'>
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    
            </div>
        </div>
        

    </form>
    <div class='list_container d-flex flex-column'>
        
    {% for feet in feets %}
        <div class='border_top'>
            <div class='list_inner'>
                <div class='list_content d-flex flex-row justify-content-between'>

                    <div class='img_text_container d-flex flex-row align-items-center'>
                        <div class='list_img'>
                            <a href="{% url 'feets:feet-detail' feet.pk %}">{% if feet.feet_image %}<img src="{{ feet.feet_image.url }}">{% endif %}</a>
                        </div>
                        <div class='list_text d-flex flex-column'>
                            <div class='h1'>
                                <h1><a href="{% url 'feets:feet-detail' feet.pk %}">{{feet.name}}</a></h1>
                            </div>
                            <div class='h2'>
                                <h2 class='pc_feet_description'><a href="{% url 'feets:feet-detail' feet.pk %}">{{feet.description}}</a></h2>
                                <h2 class='mob_feet_description'><a href="{% url 'feets:feet-detail' feet.pk %}">{{feet.description|truncatechars:80}}</a></h2>
                            </div>
                            <div class='mob_date_container'>
                                <h4>활동등급:{{feet.brand.get}}/
                                    최대허용체중:{{feet.weight}}/
                                    등급:{{feet.rating.get}}
                            </div>
                        </div>
                    </div>

                    <table class='date_container'>
                        <tr>
                            <td>활동 가능 범위</td><td> : </td><td>{{feet.brand.get}}</td>
                        </tr>
                        <tr>
                            <td>최대 허용 체중</td><td> : </td><td>{{feet.weight}}</td>
                        </tr>
                        <tr>
                            <td>제품 분류</td><td> : </td><td>{{feet.rating.get}}</td>
                        </tr>
                    </table>


                </div>
            </div>
        </div>
    {% endfor %}
    </div>

    <div class='pagenator d-flex flex-row justify-content-center'>
        {% if feets.has_previous %}
        <div class='page-item'>
            <h5><a href='?{{request.GET.urlencode}}&page={{feets.previous_page_number}}'><i class="fas fa-angle-left"></i></a></h5>
        </div>
        {% endif %}

        {% for num in feets.paginator.page_range %}
        {% if feets.number == num %}
        <div class='page-item'>
            <h5 class="current-page-item">{{ num }}</h5>
        </div>
        {% elif num > feets.number|add:'-4' and num < feets.number|add:'4' %}
        <div class='page-item'>
            <h5><a href="?{{request.GET.urlencode}}&page={{ num }}">{{ num }}</a></h5>
        </div>
        {% endif %}
        {% endfor %}

        {% if feets.has_next %}
        <div class='page-item'>
            <h5><a href='?{{request.GET.urlencode}}&page={{feets.next_page_number}}'><i class="fas fa-angle-right"></i></a></h5>
        </div>
        {% endif %}
    </div>

</div>
{% endblock content %}

{% block jquery %}

    $(document).ready(function(){
        var archive = [];
        console.log(localStorage.length)
        for(var i=0 ; i < localStorage.length; i++) {
            var reCheck = '#' + localStorage.key(i)
            $(reCheck).prop('checked', true)
            $(reCheck).val(localStorage.getItem(localStorage.key(i)))
            
            var mobTargetId = '#' + 'mob_' + localStorage.key(i)
            $(mobTargetId).css({
                'background-color':'#053282',
                'color':'#ffffff',
            })
    }});




    $('.form-check-label').prevAll().click(function(event){
        var targetId = '#' + event.currentTarget.id;
        if ($(targetId).is(":checked") ==  true) {
            
            var mobTargetId = '#' + 'mob_' + event.currentTarget.id
            $(mobTargetId).css({
                'background-color':'#053282',
                'color':'#ffffff',
            })
            localStorage.setItem(event.currentTarget.id, event.currentTarget.value)
            $('#filter_form').submit()
        }
        

        if ($(targetId).is(":checked") ==  false) {
            var mobTargetId = '#' + 'mob_' + event.currentTarget.id
            $(mobTargetId).css({
                'color':'#000000',
                'background-color':'#ffffff'
            })
            localStorage.removeItem(event.currentTarget.id)
            $('#filter_form').submit()
        }
    })

    $('.btn_reset').click(function(){
        localStorage.clear();
    })






{% endblock jquery %}

{% block js %}
<script>




</script>
{% endblock js %}


